{"ast":null,"code":"import _objectSpread from \"/Users/pokeoseu/Desktop/React-Self-Study/YouTube-self/self/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/pokeoseu/Desktop/React-Self-Study/YouTube-self/self/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pokeoseu/Desktop/React-Self-Study/YouTube-self/self/src/VideoPlayer.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport qs from 'query-string';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { like, dislike, comment, del } from './actions';\nimport Nav from './component/Nav/Nav';\nimport SearchBar from './component/SearchBar/SearchBar';\nimport { withRouter } from 'react-router-dom';\nimport uuid from 'uuid';\nimport axios from 'axios';\n\nconst VideoPlayer = props => {\n  const id = props.match.params.id;\n\n  const _qs$parse = qs.parse(props.location.search),\n        v = _qs$parse.v;\n\n  const _id = id || v;\n\n  if (!_id) return null;\n  const url = `https://youtube.com/embed/${_id}`;\n\n  const _useState = useState({}),\n        _useState2 = _slicedToArray(_useState, 2),\n        videoInfo = _useState2[0],\n        setVideoInfo = _useState2[1];\n\n  async function getYoutubeVideoData(_id) {\n    const params = {\n      key: process.env.REACT_APP_YOUTUBE_API_KEY,\n      part: 'snippet,statistics',\n      id: _id\n    };\n\n    const _ref = await axios.get('https://www.googleapis.com/youtube/v3/videos', {\n      params\n    }),\n          data = _ref.data;\n\n    setVideoInfo(_objectSpread({}, data.items[0]));\n  }\n\n  useEffect(() => {\n    getYoutubeVideoData(_id);\n  }, []);\n  console.log(videoInfo);\n  let text;\n  let cid = 0;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(SearchBar, {\n    onSearchVideos: e => props.history.push(`/results?search_query=${e}`),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  })), React.createElement(\"iframe\", {\n    src: url,\n    title: _id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: () => props.like(_id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"yt-icon\", {\n    class: \"style-scope ytd-toggle-button-renderer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    preserveAspectRatio: \"xMidYMid meet\",\n    focusable: \"false\",\n    className: \"style-scope yt-icon\",\n    style: {\n      pointerEvents: \"none\",\n      display: \"block\",\n      width: \"20px\",\n      height: \"20px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    class: \"style-scope yt-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    d: \"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57 .03-.32c0-.41- .17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-. 47.14-.73v-1.91l-.01-.01L23 10z\",\n    class: \"style-scope yt-icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }))))), props.data[_id] && props.data[_id].count ? props.data[_id].count : 0, React.createElement(\"button\", {\n    onClick: () => props.dislike(_id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"\\uC2EB\\uC5B4\\uC694!!\"), props.data[_id] && props.data[_id].dislike ? props.data[_id].dislike : 0, React.createElement(\"textarea\", {\n    ref: ref => text = ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: () => props.comment(_id, text.value, cid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"\\uB4F1\\uB85D\"), props.data[_id] && props.data[_id].comments && props.data[_id].comments.map(comment => React.createElement(\"div\", {\n    key: uuid.v4(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, comment.text, React.createElement(\"button\", {\n    onClick: () => props.del(_id, comment.cid),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"\\uC0AD\\uC81C\"))));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    data: state.videos.data\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    like,\n    dislike,\n    comment,\n    del\n  }, dispatch);\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(VideoPlayer));","map":{"version":3,"sources":["/Users/pokeoseu/Desktop/React-Self-Study/YouTube-self/self/src/VideoPlayer.jsx"],"names":["React","useEffect","useState","qs","connect","bindActionCreators","like","dislike","comment","del","Nav","SearchBar","withRouter","uuid","axios","VideoPlayer","props","id","match","params","parse","location","search","v","_id","url","videoInfo","setVideoInfo","getYoutubeVideoData","key","process","env","REACT_APP_YOUTUBE_API_KEY","part","get","data","items","console","log","text","cid","e","history","push","pointerEvents","display","width","height","count","ref","value","comments","map","v4","mapStateToProps","state","videos","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useEffect,useState } from 'react';\nimport qs from 'query-string';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { like, dislike,comment ,del} from './actions';\nimport Nav from './component/Nav/Nav';\nimport SearchBar from './component/SearchBar/SearchBar';\nimport { withRouter } from 'react-router-dom';\nimport uuid from 'uuid';\nimport axios from 'axios';\n\n\nconst VideoPlayer = props => {\n\n  \n\n  const { id } = props.match.params;\n  const { v } = qs.parse(props.location.search);\n  const _id = id || v;\n\n\n  if (!_id) return null;\n  const url = `https://youtube.com/embed/${_id}`;\n  const [videoInfo,setVideoInfo] = useState({});\n\n  async function getYoutubeVideoData(_id){\n    const params={\n      key:process.env.REACT_APP_YOUTUBE_API_KEY,\n      part:'snippet,statistics',\n      id:_id,\n    };\n    const {data}=await axios.get('https://www.googleapis.com/youtube/v3/videos',{params});\n    setVideoInfo({...data.items[0]});\n  }\n  useEffect(()=>{\n    getYoutubeVideoData(_id);\n  },[]);\n  console.log(videoInfo);\n\n  \n  let text;\n  let cid=0;\n  return(\n    <div>\n      <Nav>\n        <SearchBar onSearchVideos={e => props.history.push(`/results?search_query=${e}`)} />\n      </Nav>\n      <iframe src={url} title={_id} />\n      <button onClick={() => props.like(_id)}>\n      <yt-icon class=\"style-scope ytd-toggle-button-renderer\">\n      <svg \n      viewBox=\"0 0 24 24\"\n      preserveAspectRatio=\"xMidYMid meet\"\n      focusable=\"false\"\n      className=\"style-scope yt-icon\"\n      style={{\n          pointerEvents: \"none\",\n          display: \"block\",\n          width: \"20px\",\n          height: \"20px\"}}>\n        <g class=\"style-scope yt-icon\">\n         <path d=\"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57\n         .03-.32c0-.41-\n          .17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0\n          1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.\n          47.14-.73v-1.91l-.01-.01L23 10z\"\n           class=\"style-scope yt-icon\">\n           </path>\n       </g>\n      </svg>\n  </yt-icon>\n      </button>\n      {props.data[_id] && props.data[_id].count ? props.data[_id].count : 0}\n\n      <button onClick={() => props.dislike(_id)}>싫어요!!</button>\n      {props.data[_id] && props.data[_id].dislike ? props.data[_id].dislike  : 0 }\n\n      <textarea ref={ref=>text=ref}/><button onClick={()=>props.comment(_id,text.value,cid)}>등록</button>\n      \n        {props.data[_id]&& props.data[_id].comments && props.data[_id].comments.map((comment)=>\n          <div key={uuid.v4()}>{comment.text}<button onClick={()=>props.del(_id, comment.cid)}>삭제</button></div>)}\n\n    </div>\n  )\n}\nfunction mapStateToProps(state) {\n  return {\n    data: state.videos.data\n  }\n}\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ like, dislike,comment,del}, dispatch)\n}\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(VideoPlayer));\n\n\n"]},"metadata":{},"sourceType":"module"}